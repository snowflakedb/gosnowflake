name: Test Branch Name
on:
    pull_request:
        branches:
            - master
jobs:
  semgrep:
    runs-on: ubuntu-latest
    name: Test Branch
    steps:
        - name: Set up Python
          uses: actions/setup-python@v2
          with:
            python-version: '3.7'
        - name: set env
          run: echo "title=${{ github.event.pull_request.title }}" >> $GITHUB_ENV
        - name: PR title
          run: |
                echo ${title}
                python -c "import os; print(os.environ.get('title'))"
                t=`python -c 'import re; import os; snow_list = re.findall(r"(?:SNOW|snow|Snow)", os.environ["title"]); print(len(snow_list))'`
                echo ${t}
                echo ${{ github.event.pull_request.title }}
                echo "snow_count=${t}" >> $GITHUB_ENV
        - name: Check snow count
          if: ${{ snow_count == '0' }}
          run: exit 1
